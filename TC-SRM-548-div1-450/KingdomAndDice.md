#KingdomAndDice
作者：陈俊锟

关键词：DP 背包 多重背包
##题目简述
给出两个长度均为 $n$ 的数组 $\{a_i\}$ 和 $\{b_i\}$，其中 $a_i$ 中有一些位置是 $0$。你需要将 $\{a_i\}$ 中若干个 $0$ 修改成其他的数，要求最终的数组 $\{a_i\}$ 满足：

1. $\{a_i\}$ 中，所有数都是 $[0, x]$ 之间的整数

2. $\{a_i\}$ 和 $\{b_i\}$ 中，所有正整数都只出现了一次

在此基础上，设 $p$ 为“随机两个 $[1,n]$ 之间的整数 $i,j$”后，“$a_i < b_j$”这一事件发生的概率，要求选择一种修改 $\{a_i\}$ 的方式，使得 $|p-0.5|$ 最小。

要求返回使得 $|p-0.5|$ 最小的 $p$。如果存在多个 $p$，输出较小的那个。$n\le 50, x \le 10^9$。
##算法一
首先，这两个数组的下标是没有意义的，因此我们可以把它们看成可重集合。

其次，我们可以将取到某个 $a_i$ 的概率分别考虑。如果这个 $a_i\ne 0$，那么它对 $p$ 的贡献也确定了。如果不将它修改为非 $0$ 的值，那么它对 $p$ 没有贡献。否则，如果将 $b_i$ 数组中的数排序，那么可以将 $[1, x]$ 中分成若干段，其中每一段内取不管取哪一个数对 $p$ 的贡献都是相同的。

设布尔数组 $f(i,j)$ 表示已经改掉了 $i$ 个 $0$ 时，是否存在一种方案使得 $p = \frac{j}{n^2}$。我们把对 $p$ 的贡献相同的数在一起考虑。那么问题就转化为了一个经典的多重背包问题，直接 DP 求解即可。

最后，我们就可以得出所有可行的 $p$，直接计算答案即可。

时间复杂度：$O(n^4 \log n)$。